{"remainingRequest":"/Users/charles/Documents/Vue/pharmacy-map/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/charles/Documents/Vue/pharmacy-map/src/components/VueLeaflet.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/charles/Documents/Vue/pharmacy-map/src/components/VueLeaflet.vue","mtime":1581439155701},{"path":"/Users/charles/Documents/Vue/pharmacy-map/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/charles/Documents/Vue/pharmacy-map/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/charles/Documents/Vue/pharmacy-map/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/charles/Documents/Vue/pharmacy-map/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgTE1hcCwKICBMVGlsZUxheWVyLAogIExNYXJrZXIsCiAgTFBvcHVwLAp9IGZyb20gJ3Z1ZTItbGVhZmxldCc7CmltcG9ydCB7IGxhdExuZywgSWNvbiB9IGZyb20gJ2xlYWZsZXQnOwppbXBvcnQgVnVlMkxlYWZsZXRNYXJrZXJDbHVzdGVyIGZyb20gJ3Z1ZTItbGVhZmxldC1tYXJrZXJjbHVzdGVyJzsKCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1Z1ZUxlYWZsZXQnLAogIGNvbXBvbmVudHM6IHsKICAgIExNYXAsCiAgICBMVGlsZUxheWVyLAogICAgTE1hcmtlciwKICAgIExQb3B1cCwKICAgICd2LW1hcmtlci1jbHVzdGVyJzogVnVlMkxlYWZsZXRNYXJrZXJDbHVzdGVyLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHpvb206IDE0LAogICAgICBjZW50ZXI6IGxhdExuZygyMi42MjczMzMsIDEyMC4zMTgwNjUpLAogICAgICB1cmw6ICdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycsCiAgICAgIGF0dHJpYnV0aW9uOiAnTWFwIGRhdGEgJmNvcHk7IDxhIGhyZWY9Imh0dHBzOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnLyI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzLCA8YSBocmVmPSJodHRwczovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktc2EvMi4wLyI+Q0MtQlktU0E8L2E+JywKICAgICAgaWNvbkNvbG9yOiB7CiAgICAgICAgZ3JleTogdGhpcy5jdXN0b21JY29uQ29sb3IoJ2dyZXknKSwKICAgICAgICBibHVlOiB0aGlzLmN1c3RvbUljb25Db2xvcignYmx1ZScpLAogICAgICAgIGdvbGQ6IHRoaXMuY3VzdG9tSWNvbkNvbG9yKCdnb2xkJyksCiAgICAgICAgZ3JlZW46IHRoaXMuY3VzdG9tSWNvbkNvbG9yKCdncmVlbicpLAogICAgICAgIHJlZDogdGhpcy5jdXN0b21JY29uQ29sb3IoJ3JlZCcpLAogICAgICB9LAogICAgICBjbHVzdGVyT3B0aW9uczogewogICAgICAgIGRpc2FibGVDbHVzdGVyaW5nQXRab29tOiAxNiwKICAgICAgfSwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLy8g5pu05paw5Y+j572p5pW46YePCiAgICBwaGFybWFjaWVzKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucGhhcm1hY2llczsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDluqfmqJnntpPnt6/luqYKICAgIGdldEdlb21ldHJ5KGdlbykgewogICAgICByZXR1cm4gbGF0TG5nKGdlby5jb29yZGluYXRlc1sxXSwgZ2VvLmNvb3JkaW5hdGVzWzBdKTsgLy8gbGF0TG5nKOe3r+W6pu+8jOe2k+W6pikKICAgIH0sCiAgICAvLyDluqfmqJnlvYjlh7roppbnqpcKICAgIGdldEluZm8ocHJvcCkgewogICAgICAvLyBjb25zdCBwaG9uZSA9IGAoJHtwcm9wLnBob25lLnN1YnN0cigwLCAyKX0pLSR7cHJvcC5waG9uZS5zdWJzdHIoNCl9YDsKICAgICAgY29uc3QgdXBkYXRlZCA9IHByb3AudXBkYXRlZCA9PT0gJycgPyAn54ShJyA6IHByb3AudXBkYXRlZDsKICAgICAgcmV0dXJuIGAKICAgICAgICA8aDEgY2xhc3M9InRleHQteGwgZm9udC1tZWRpdW0gbWItMiI+JHtwcm9wLm5hbWV9PC9oMT4KICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LWJhc2UgdGV4dC1ncmV5IG1iLTIiPgogICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1tYXAtbWFya2VyLWFsdCBtci0xIj48L2k+CiAgICAgICAgICA8c3Bhbj4ke3Byb3AuYWRkcmVzc308L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1iYXNlIHRleHQtZ3JleSBtYi0yIj4KICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtcGhvbmUtdm9sdW1lIG1yLTEiPjwvaT4KICAgICAgICAgIDxzcGFuPiR7cHJvcC5waG9uZX08L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1iYXNlIGZsZXggbWItMiBqdXN0aWZ5LWNlbnRlciI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LWNlbnRlciB0ZXh0LXdoaXRlIGJnLXByaW1hcnkgcHktMyByb3VuZGVkLWwgcm91bmRlZC1yLW5vbmUgYm9yZGVyLXIgdy0xLzIiPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ibXItMSI+5oiQ5Lq65Y+j572pOjwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4+JHtwcm9wLm1hc2tfYWR1bHR9PC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LWNlbnRlciB0ZXh0LXdoaXRlIGJnLXByaW1hcnkgcHktMyByb3VuZGVkLXIgcm91bmRlZC1sLW5vbmUgdy0xLzIiPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ibXItMSI+5YWS56ul5Y+j572pOjwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4+JHtwcm9wLm1hc2tfY2hpbGR9PC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1zbSB0ZXh0LWdyZXkiPuabtOaWsOaZgumWkzogJHt1cGRhdGVkfTwvZGl2PgogICAgICBgOwogICAgfSwKICAgIC8vIOW6p+aomemhj+iJsgogICAgY3VzdG9tSWNvbkNvbG9yKGNvbG9yKSB7CiAgICAgIC8vIGxlYWZsZXQtY29sb3ItbWFya2VycwogICAgICBjb25zdCBpY29uQ29sb3IgPSBuZXcgSWNvbih7CiAgICAgICAgaWNvblVybDogYGh0dHBzOi8vY2RuLnJhd2dpdC5jb20vcG9pbnRoaS9sZWFmbGV0LWNvbG9yLW1hcmtlcnMvbWFzdGVyL2ltZy9tYXJrZXItaWNvbi0yeC0ke2NvbG9yfS5wbmdgLAogICAgICAgIHNoYWRvd1VybDogJ2h0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQvMC43LjcvaW1hZ2VzL21hcmtlci1zaGFkb3cucG5nJywKICAgICAgICBpY29uU2l6ZTogWzI1LCA0MV0sCiAgICAgICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sCiAgICAgICAgcG9wdXBBbmNob3I6IFsxLCAtMzRdLAogICAgICAgIHNoYWRvd1NpemU6IFs0MSwgNDFdLAogICAgICB9KTsKICAgICAgcmV0dXJuIGljb25Db2xvcjsKICAgIH0sCiAgICAvLyDkvp3lj6Pnvanmlbjph48o5oiQ5Lq6K+WFkuerpSnljYDliIbluqfmqJnpoY/oibIKICAgIGN1c3RvbUljb24ocHJvcCkgewogICAgICBjb25zdCBxdWFudGl0eSA9IHByb3AubWFza19hZHVsdCArIHByb3AubWFza19jaGlsZDsKICAgICAgbGV0IGljb24gPSB0aGlzLmljb25Db2xvci5ibHVlOwogICAgICBpZiAocXVhbnRpdHkgPiAxMDApIHsKICAgICAgICBpY29uID0gdGhpcy5pY29uQ29sb3IuZ3JlZW47CiAgICAgIH0gZWxzZSBpZiAocXVhbnRpdHkgPiA1MCkgewogICAgICAgIGljb24gPSB0aGlzLmljb25Db2xvci5nb2xkOwogICAgICB9IGVsc2UgaWYgKHF1YW50aXR5ID4gMCkgewogICAgICAgIGljb24gPSB0aGlzLmljb25Db2xvci5yZWQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWNvbiA9IHRoaXMuaWNvbkNvbG9yLmdyZXk7CiAgICAgIH0KICAgICAgcmV0dXJuIGljb247CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["VueLeaflet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VueLeaflet.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"vue-leaflet w-9/12 h-screen\">\n    <l-map :zoom=\"zoom\" :center=\"center\">\n      <l-tile-layer :url=\"url\" :attribution=\"attribution\"></l-tile-layer>\n      <v-marker-cluster :options=\"clusterOptions\">\n        <l-marker v-for=\"item in pharmacies\"\n          :key=\"item.id\"\n          :icon=\"customIcon(item.properties)\"\n          :lat-lng=\"getGeometry(item.geometry)\"\n        >\n          <l-popup :content=\"getInfo(item.properties)\"></l-popup>\n        </l-marker>\n      </v-marker-cluster>\n    </l-map>\n  </div>\n</template>\n\n<script>\nimport {\n  LMap,\n  LTileLayer,\n  LMarker,\n  LPopup,\n} from 'vue2-leaflet';\nimport { latLng, Icon } from 'leaflet';\nimport Vue2LeafletMarkerCluster from 'vue2-leaflet-markercluster';\n\n\nexport default {\n  name: 'VueLeaflet',\n  components: {\n    LMap,\n    LTileLayer,\n    LMarker,\n    LPopup,\n    'v-marker-cluster': Vue2LeafletMarkerCluster,\n  },\n  data() {\n    return {\n      zoom: 14,\n      center: latLng(22.627333, 120.318065),\n      url: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n      attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>',\n      iconColor: {\n        grey: this.customIconColor('grey'),\n        blue: this.customIconColor('blue'),\n        gold: this.customIconColor('gold'),\n        green: this.customIconColor('green'),\n        red: this.customIconColor('red'),\n      },\n      clusterOptions: {\n        disableClusteringAtZoom: 16,\n      },\n    };\n  },\n  computed: {\n    // 更新口罩數量\n    pharmacies() {\n      return this.$store.state.pharmacies;\n    },\n  },\n  methods: {\n    // 座標經緯度\n    getGeometry(geo) {\n      return latLng(geo.coordinates[1], geo.coordinates[0]); // latLng(緯度，經度)\n    },\n    // 座標彈出視窗\n    getInfo(prop) {\n      // const phone = `(${prop.phone.substr(0, 2)})-${prop.phone.substr(4)}`;\n      const updated = prop.updated === '' ? '無' : prop.updated;\n      return `\n        <h1 class=\"text-xl font-medium mb-2\">${prop.name}</h1>\n        <div class=\"text-base text-grey mb-2\">\n          <i class=\"fas fa-map-marker-alt mr-1\"></i>\n          <span>${prop.address}</span>\n        </div>\n        <div class=\"text-base text-grey mb-2\">\n          <i class=\"fas fa-phone-volume mr-1\"></i>\n          <span>${prop.phone}</span>\n        </div>\n        <div class=\"text-base flex mb-2 justify-center\">\n          <div class=\"text-center text-white bg-primary py-3 rounded-l rounded-r-none border-r w-1/2\">\n            <span class=\"mr-1\">成人口罩:</span>\n            <span>${prop.mask_adult}</span>\n          </div>\n          <div class=\"text-center text-white bg-primary py-3 rounded-r rounded-l-none w-1/2\">\n            <span class=\"mr-1\">兒童口罩:</span>\n            <span>${prop.mask_child}</span>\n          </div>\n        </div>\n        <div class=\"text-sm text-grey\">更新時間: ${updated}</div>\n      `;\n    },\n    // 座標顏色\n    customIconColor(color) {\n      // leaflet-color-markers\n      const iconColor = new Icon({\n        iconUrl: `https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-${color}.png`,\n        shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\n        iconSize: [25, 41],\n        iconAnchor: [12, 41],\n        popupAnchor: [1, -34],\n        shadowSize: [41, 41],\n      });\n      return iconColor;\n    },\n    // 依口罩數量(成人+兒童)區分座標顏色\n    customIcon(prop) {\n      const quantity = prop.mask_adult + prop.mask_child;\n      let icon = this.iconColor.blue;\n      if (quantity > 100) {\n        icon = this.iconColor.green;\n      } else if (quantity > 50) {\n        icon = this.iconColor.gold;\n      } else if (quantity > 0) {\n        icon = this.iconColor.red;\n      } else {\n        icon = this.iconColor.grey;\n      }\n      return icon;\n    },\n  },\n};\n</script>\n\n<style scoped>\n  @import \"~leaflet.markercluster/dist/MarkerCluster.css\";\n  @import \"~leaflet.markercluster/dist/MarkerCluster.Default.css\";\n</style>\n"]}]}
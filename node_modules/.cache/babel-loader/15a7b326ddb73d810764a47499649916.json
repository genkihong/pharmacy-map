{"remainingRequest":"/Users/charles/Documents/Vue/pharmacy-map/node_modules/thread-loader/dist/cjs.js!/Users/charles/Documents/Vue/pharmacy-map/node_modules/babel-loader/lib/index.js!/Users/charles/Documents/Vue/pharmacy-map/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/charles/Documents/Vue/pharmacy-map/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/charles/Documents/Vue/pharmacy-map/src/components/VueLeaflet.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/charles/Documents/Vue/pharmacy-map/src/components/VueLeaflet.vue","mtime":1581658153924},{"path":"/Users/charles/Documents/Vue/pharmacy-map/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/charles/Documents/Vue/pharmacy-map/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/charles/Documents/Vue/pharmacy-map/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/charles/Documents/Vue/pharmacy-map/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/charles/Documents/Vue/pharmacy-map/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgTE1hcCwgTFRpbGVMYXllciwgTE1hcmtlciwgTFBvcHVwIH0gZnJvbSAndnVlMi1sZWFmbGV0JzsKaW1wb3J0IHsgSWNvbiB9IGZyb20gJ2xlYWZsZXQnOwppbXBvcnQgVnVlMkxlYWZsZXRNYXJrZXJDbHVzdGVyIGZyb20gJ3Z1ZTItbGVhZmxldC1tYXJrZXJjbHVzdGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdWdWVMZWFmbGV0JywKICBwcm9wczogewogICAgdXBkYXRlTWFwOiB7CiAgICAgIHR5cGU6IEFycmF5CiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBMTWFwOiBMTWFwLAogICAgTFRpbGVMYXllcjogTFRpbGVMYXllciwKICAgIExNYXJrZXI6IExNYXJrZXIsCiAgICBMUG9wdXA6IExQb3B1cCwKICAgICd2LW1hcmtlci1jbHVzdGVyJzogVnVlMkxlYWZsZXRNYXJrZXJDbHVzdGVyCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgem9vbTogMTIsCiAgICAgIC8vIGNlbnRlcjogbGF0TG5nKDIyLjYyNzMzMywgMTIwLjMxODA2NSksCiAgICAgIGNlbnRlcjogWzIyLjYyNzMzMywgMTIwLjMxODA2NV0sCiAgICAgIGJvdW5kczogbnVsbCwKICAgICAgdXJsOiAnaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnLAogICAgICBhdHRyaWJ1dGlvbjogJ01hcCBkYXRhICZjb3B5OyA8YSBocmVmPSJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy8iPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgPGEgaHJlZj0iaHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LXNhLzIuMC8iPkNDLUJZLVNBPC9hPicsCiAgICAgIGljb25Db2xvcjogewogICAgICAgIGdyZXk6IHRoaXMuY3VzdG9tSWNvbkNvbG9yKCdncmV5JyksCiAgICAgICAgYmx1ZTogdGhpcy5jdXN0b21JY29uQ29sb3IoJ2JsdWUnKSwKICAgICAgICBnb2xkOiB0aGlzLmN1c3RvbUljb25Db2xvcignZ29sZCcpLAogICAgICAgIGdyZWVuOiB0aGlzLmN1c3RvbUljb25Db2xvcignZ3JlZW4nKSwKICAgICAgICByZWQ6IHRoaXMuY3VzdG9tSWNvbkNvbG9yKCdyZWQnKQogICAgICB9LAogICAgICBjbHVzdGVyT3B0aW9uczogewogICAgICAgIGRpc2FibGVDbHVzdGVyaW5nQXRab29tOiAxNgogICAgICB9CiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHVwZGF0ZU1hcDogZnVuY3Rpb24gdXBkYXRlTWFwKCkgewogICAgICAvLyBjb25zb2xlLmxvZygn57ev5bqmJywgdGhpcy51cGRhdGVNYXBbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV0pOwogICAgICAvLyBjb25zb2xlLmxvZygn57aT5bqmJywgdGhpcy51cGRhdGVNYXBbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF0pOwogICAgICB0aGlzLmNlbnRlciA9IFt0aGlzLnVwZGF0ZU1hcFswXS5nZW9tZXRyeS5jb29yZGluYXRlc1sxXSwgdGhpcy51cGRhdGVNYXBbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1dOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8vIOabtOaWsOWPo+e9qeaVuOmHjwogICAgcGhhcm1hY2llczogZnVuY3Rpb24gcGhhcm1hY2llcygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnBoYXJtYWNpZXM7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICB6b29tVXBkYXRlZDogZnVuY3Rpb24gem9vbVVwZGF0ZWQoem9vbSkgewogICAgICB0aGlzLnpvb20gPSB6b29tOwogICAgfSwKICAgIGNlbnRlclVwZGF0ZWQ6IGZ1bmN0aW9uIGNlbnRlclVwZGF0ZWQoY2VudGVyKSB7CiAgICAgIHRoaXMuY2VudGVyID0gY2VudGVyOwogICAgfSwKICAgIGJvdW5kc1VwZGF0ZWQ6IGZ1bmN0aW9uIGJvdW5kc1VwZGF0ZWQoYm91bmRzKSB7CiAgICAgIHRoaXMuYm91bmRzID0gYm91bmRzOwogICAgfSwKICAgIC8vIOW6p+aomee2k+e3r+W6pgogICAgZ2V0R2VvbWV0cnk6IGZ1bmN0aW9uIGdldEdlb21ldHJ5KGdlbykgewogICAgICAvLyByZXR1cm4gbGF0TG5nKGdlby5jb29yZGluYXRlc1sxXSwgZ2VvLmNvb3JkaW5hdGVzWzBdKTsgLy8gbGF0TG5nKOe3r+W6pu+8jOe2k+W6pikKICAgICAgcmV0dXJuIFtnZW8uY29vcmRpbmF0ZXNbMV0sIGdlby5jb29yZGluYXRlc1swXV07IC8vIGxhdExuZyjnt6/luqbvvIzntpPluqYpCiAgICB9LAogICAgLy8g5bqn5qiZ6aGP6ImyCiAgICBjdXN0b21JY29uQ29sb3I6IGZ1bmN0aW9uIGN1c3RvbUljb25Db2xvcihjb2xvcikgewogICAgICAvLyBsZWFmbGV0LWNvbG9yLW1hcmtlcnMKICAgICAgdmFyIGljb25Db2xvciA9IG5ldyBJY29uKHsKICAgICAgICBpY29uVXJsOiAiaHR0cHM6Ly9jZG4ucmF3Z2l0LmNvbS9wb2ludGhpL2xlYWZsZXQtY29sb3ItbWFya2Vycy9tYXN0ZXIvaW1nL21hcmtlci1pY29uLTJ4LSIuY29uY2F0KGNvbG9yLCAiLnBuZyIpLAogICAgICAgIHNoYWRvd1VybDogJ2h0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQvMC43LjcvaW1hZ2VzL21hcmtlci1zaGFkb3cucG5nJywKICAgICAgICBpY29uU2l6ZTogWzI1LCA0MV0sCiAgICAgICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sCiAgICAgICAgcG9wdXBBbmNob3I6IFsxLCAtMzRdLAogICAgICAgIHNoYWRvd1NpemU6IFs0MSwgNDFdCiAgICAgIH0pOwogICAgICByZXR1cm4gaWNvbkNvbG9yOwogICAgfSwKICAgIC8vIOS+neWPo+e9qeaVuOmHjyjmiJDkuror5YWS56ulKeWNgOWIhuW6p+aomemhj+iJsgogICAgY3VzdG9tSWNvbjogZnVuY3Rpb24gY3VzdG9tSWNvbihwcm9wKSB7CiAgICAgIHZhciBxdWFudGl0eSA9IHByb3AubWFza19hZHVsdCArIHByb3AubWFza19jaGlsZDsKICAgICAgdmFyIGljb24gPSB0aGlzLmljb25Db2xvci5ibHVlOwoKICAgICAgaWYgKHF1YW50aXR5ID4gMTAwKSB7CiAgICAgICAgaWNvbiA9IHRoaXMuaWNvbkNvbG9yLmdyZWVuOwogICAgICB9IGVsc2UgaWYgKHF1YW50aXR5ID4gNTApIHsKICAgICAgICBpY29uID0gdGhpcy5pY29uQ29sb3IuZ29sZDsKICAgICAgfSBlbHNlIGlmIChxdWFudGl0eSA+IDApIHsKICAgICAgICBpY29uID0gdGhpcy5pY29uQ29sb3IucmVkOwogICAgICB9IGVsc2UgewogICAgICAgIGljb24gPSB0aGlzLmljb25Db2xvci5ncmV5OwogICAgICB9CgogICAgICByZXR1cm4gaWNvbjsKICAgIH0KICB9Cn07"},{"version":3,"sources":["VueLeaflet.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"vue-leaflet w-9/12 h-screen\">\n    <l-map\n    :zoom=\"zoom\"\n    :center=\"center\"\n    @update:zoom=\"zoomUpdated\"\n    @update:center=\"centerUpdated\"\n    @update:bounds=\"boundsUpdated\"\n    >\n      <l-tile-layer :url=\"url\" :attribution=\"attribution\"></l-tile-layer>\n      <v-marker-cluster :options=\"clusterOptions\">\n        <l-marker v-for=\"item in updateMap\"\n          :key=\"item.id\"\n          :icon=\"customIcon(item.properties)\"\n          :lat-lng=\"getGeometry(item.geometry)\"\n        >\n          <l-popup>\n            <h1 class=\"text-xl font-medium mb-2\">{{item.properties.name}}</h1>\n            <div class=\"text-base text-grey flex items-center mb-2\">\n              <i class=\"map-icon mr-2 block h-4 w-4 bg-no-repeat bg-contain\"></i>\n              <span>{{item.properties.address}}</span>\n            </div>\n            <div class=\"text-base text-grey flex items-center mb-2\">\n              <i class=\"phone-icon mr-2 block h-4 w-4 bg-no-repeat\"></i>\n              <span>{{item.properties.phone}}</span>\n            </div>\n            <div class=\"text-base flex mb-2 justify-center\">\n              <div class=\"text-center text-white bg-primary py-2 rounded-l rounded-r-none border-r w-1/2\">\n                <span class=\"mr-1\">成人口罩:</span>\n                <span>{{item.properties.mask_adult}}</span>\n              </div>\n              <div class=\"text-center text-white bg-primary py-2 rounded-r rounded-l-none w-1/2\">\n                <span class=\"mr-1\">兒童口罩:</span>\n                <span>{{item.properties.mask_child}}</span>\n              </div>\n            </div>\n            <div class=\"text-sm text-grey\"\n              v-if=\"item.properties.updated\">更新時間: {{item.properties.updated}}</div>\n            <div class=\"text-sm text-grey\" v-else>更新時間: 無</div>\n          </l-popup>\n        </l-marker>\n      </v-marker-cluster>\n    </l-map>\n  </div>\n</template>\n\n<script>\nimport {\n  LMap,\n  LTileLayer,\n  LMarker,\n  LPopup,\n} from 'vue2-leaflet';\nimport { Icon } from 'leaflet';\nimport Vue2LeafletMarkerCluster from 'vue2-leaflet-markercluster';\n\n\nexport default {\n  name: 'VueLeaflet',\n  props: {\n    updateMap: {\n      type: Array,\n    },\n  },\n  components: {\n    LMap,\n    LTileLayer,\n    LMarker,\n    LPopup,\n    'v-marker-cluster': Vue2LeafletMarkerCluster,\n  },\n  data() {\n    return {\n      zoom: 12,\n      // center: latLng(22.627333, 120.318065),\n      center: [22.627333, 120.318065],\n      bounds: null,\n      url: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n      attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>',\n      iconColor: {\n        grey: this.customIconColor('grey'),\n        blue: this.customIconColor('blue'),\n        gold: this.customIconColor('gold'),\n        green: this.customIconColor('green'),\n        red: this.customIconColor('red'),\n      },\n      clusterOptions: {\n        disableClusteringAtZoom: 16,\n      },\n    };\n  },\n  watch: {\n    updateMap() {\n      // console.log('緯度', this.updateMap[0].geometry.coordinates[1]);\n      // console.log('經度', this.updateMap[0].geometry.coordinates[0]);\n      this.center = [this.updateMap[0].geometry.coordinates[1], this.updateMap[0].geometry.coordinates[0]];\n    },\n  },\n  computed: {\n    // 更新口罩數量\n    pharmacies() {\n      return this.$store.state.pharmacies;\n    },\n  },\n  methods: {\n    zoomUpdated(zoom) {\n      this.zoom = zoom;\n    },\n    centerUpdated(center) {\n      this.center = center;\n    },\n    boundsUpdated(bounds) {\n      this.bounds = bounds;\n    },\n    // 座標經緯度\n    getGeometry(geo) {\n      // return latLng(geo.coordinates[1], geo.coordinates[0]); // latLng(緯度，經度)\n      return [geo.coordinates[1], geo.coordinates[0]]; // latLng(緯度，經度)\n    },\n    // 座標顏色\n    customIconColor(color) {\n      // leaflet-color-markers\n      const iconColor = new Icon({\n        iconUrl: `https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-${color}.png`,\n        shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\n        iconSize: [25, 41],\n        iconAnchor: [12, 41],\n        popupAnchor: [1, -34],\n        shadowSize: [41, 41],\n      });\n      return iconColor;\n    },\n    // 依口罩數量(成人+兒童)區分座標顏色\n    customIcon(prop) {\n      const quantity = prop.mask_adult + prop.mask_child;\n      let icon = this.iconColor.blue;\n      if (quantity > 100) {\n        icon = this.iconColor.green;\n      } else if (quantity > 50) {\n        icon = this.iconColor.gold;\n      } else if (quantity > 0) {\n        icon = this.iconColor.red;\n      } else {\n        icon = this.iconColor.grey;\n      }\n      return icon;\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/components"}]}
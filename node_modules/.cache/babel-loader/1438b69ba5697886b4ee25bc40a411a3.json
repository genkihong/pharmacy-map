{"remainingRequest":"/Users/charles/Documents/Vue/pharmacy-map/node_modules/babel-loader/lib/index.js!/Users/charles/Documents/Vue/pharmacy-map/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/charles/Documents/Vue/pharmacy-map/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/charles/Documents/Vue/pharmacy-map/src/components/VueLeaflet.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/charles/Documents/Vue/pharmacy-map/src/components/VueLeaflet.vue","mtime":1581439155701},{"path":"/Users/charles/Documents/Vue/pharmacy-map/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/charles/Documents/Vue/pharmacy-map/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/charles/Documents/Vue/pharmacy-map/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/charles/Documents/Vue/pharmacy-map/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IExNYXAsIExUaWxlTGF5ZXIsIExNYXJrZXIsIExQb3B1cCB9IGZyb20gJ3Z1ZTItbGVhZmxldCc7CmltcG9ydCB7IGxhdExuZywgSWNvbiB9IGZyb20gJ2xlYWZsZXQnOwppbXBvcnQgVnVlMkxlYWZsZXRNYXJrZXJDbHVzdGVyIGZyb20gJ3Z1ZTItbGVhZmxldC1tYXJrZXJjbHVzdGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdWdWVMZWFmbGV0JywKICBjb21wb25lbnRzOiB7CiAgICBMTWFwOiBMTWFwLAogICAgTFRpbGVMYXllcjogTFRpbGVMYXllciwKICAgIExNYXJrZXI6IExNYXJrZXIsCiAgICBMUG9wdXA6IExQb3B1cCwKICAgICd2LW1hcmtlci1jbHVzdGVyJzogVnVlMkxlYWZsZXRNYXJrZXJDbHVzdGVyCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgem9vbTogMTQsCiAgICAgIGNlbnRlcjogbGF0TG5nKDIyLjYyNzMzMywgMTIwLjMxODA2NSksCiAgICAgIHVybDogJ2h0dHBzOi8ve3N9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nJywKICAgICAgYXR0cmlidXRpb246ICdNYXAgZGF0YSAmY29weTsgPGEgaHJlZj0iaHR0cHM6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsIDxhIGhyZWY9Imh0dHBzOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8yLjAvIj5DQy1CWS1TQTwvYT4nLAogICAgICBpY29uQ29sb3I6IHsKICAgICAgICBncmV5OiB0aGlzLmN1c3RvbUljb25Db2xvcignZ3JleScpLAogICAgICAgIGJsdWU6IHRoaXMuY3VzdG9tSWNvbkNvbG9yKCdibHVlJyksCiAgICAgICAgZ29sZDogdGhpcy5jdXN0b21JY29uQ29sb3IoJ2dvbGQnKSwKICAgICAgICBncmVlbjogdGhpcy5jdXN0b21JY29uQ29sb3IoJ2dyZWVuJyksCiAgICAgICAgcmVkOiB0aGlzLmN1c3RvbUljb25Db2xvcigncmVkJykKICAgICAgfSwKICAgICAgY2x1c3Rlck9wdGlvbnM6IHsKICAgICAgICBkaXNhYmxlQ2x1c3RlcmluZ0F0Wm9vbTogMTYKICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDmm7TmlrDlj6Pnvanmlbjph48KICAgIHBoYXJtYWNpZXM6IGZ1bmN0aW9uIHBoYXJtYWNpZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5waGFybWFjaWVzOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5bqn5qiZ57aT57ev5bqmCiAgICBnZXRHZW9tZXRyeTogZnVuY3Rpb24gZ2V0R2VvbWV0cnkoZ2VvKSB7CiAgICAgIHJldHVybiBsYXRMbmcoZ2VvLmNvb3JkaW5hdGVzWzFdLCBnZW8uY29vcmRpbmF0ZXNbMF0pOyAvLyBsYXRMbmco57ev5bqm77yM57aT5bqmKQogICAgfSwKICAgIC8vIOW6p+aomeW9iOWHuuimlueqlwogICAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbyhwcm9wKSB7CiAgICAgIC8vIGNvbnN0IHBob25lID0gYCgke3Byb3AucGhvbmUuc3Vic3RyKDAsIDIpfSktJHtwcm9wLnBob25lLnN1YnN0cig0KX1gOwogICAgICB2YXIgdXBkYXRlZCA9IHByb3AudXBkYXRlZCA9PT0gJycgPyAn54ShJyA6IHByb3AudXBkYXRlZDsKICAgICAgcmV0dXJuICJcbiAgICAgICAgPGgxIGNsYXNzPVwidGV4dC14bCBmb250LW1lZGl1bSBtYi0yXCI+Ii5jb25jYXQocHJvcC5uYW1lLCAiPC9oMT5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtYmFzZSB0ZXh0LWdyZXkgbWItMlwiPlxuICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLW1hcC1tYXJrZXItYWx0IG1yLTFcIj48L2k+XG4gICAgICAgICAgPHNwYW4+IikuY29uY2F0KHByb3AuYWRkcmVzcywgIjwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWJhc2UgdGV4dC1ncmV5IG1iLTJcIj5cbiAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1waG9uZS12b2x1bWUgbXItMVwiPjwvaT5cbiAgICAgICAgICA8c3Bhbj4iKS5jb25jYXQocHJvcC5waG9uZSwgIjwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWJhc2UgZmxleCBtYi0yIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtd2hpdGUgYmctcHJpbWFyeSBweS0zIHJvdW5kZWQtbCByb3VuZGVkLXItbm9uZSBib3JkZXItciB3LTEvMlwiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtci0xXCI+XHU2MjEwXHU0RUJBXHU1M0UzXHU3RjY5Ojwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuPiIpLmNvbmNhdChwcm9wLm1hc2tfYWR1bHQsICI8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtd2hpdGUgYmctcHJpbWFyeSBweS0zIHJvdW5kZWQtciByb3VuZGVkLWwtbm9uZSB3LTEvMlwiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtci0xXCI+XHU1MTUyXHU3QUU1XHU1M0UzXHU3RjY5Ojwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuPiIpLmNvbmNhdChwcm9wLm1hc2tfY2hpbGQsICI8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1zbSB0ZXh0LWdyZXlcIj5cdTY2RjRcdTY1QjBcdTY2NDJcdTk1OTM6ICIpLmNvbmNhdCh1cGRhdGVkLCAiPC9kaXY+XG4gICAgICAiKTsKICAgIH0sCiAgICAvLyDluqfmqJnpoY/oibIKICAgIGN1c3RvbUljb25Db2xvcjogZnVuY3Rpb24gY3VzdG9tSWNvbkNvbG9yKGNvbG9yKSB7CiAgICAgIC8vIGxlYWZsZXQtY29sb3ItbWFya2VycwogICAgICB2YXIgaWNvbkNvbG9yID0gbmV3IEljb24oewogICAgICAgIGljb25Vcmw6ICJodHRwczovL2Nkbi5yYXdnaXQuY29tL3BvaW50aGkvbGVhZmxldC1jb2xvci1tYXJrZXJzL21hc3Rlci9pbWcvbWFya2VyLWljb24tMngtIi5jb25jYXQoY29sb3IsICIucG5nIiksCiAgICAgICAgc2hhZG93VXJsOiAnaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuNy9pbWFnZXMvbWFya2VyLXNoYWRvdy5wbmcnLAogICAgICAgIGljb25TaXplOiBbMjUsIDQxXSwKICAgICAgICBpY29uQW5jaG9yOiBbMTIsIDQxXSwKICAgICAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sCiAgICAgICAgc2hhZG93U2l6ZTogWzQxLCA0MV0KICAgICAgfSk7CiAgICAgIHJldHVybiBpY29uQ29sb3I7CiAgICB9LAogICAgLy8g5L6d5Y+j572p5pW46YePKOaIkOS6uivlhZLnq6Up5Y2A5YiG5bqn5qiZ6aGP6ImyCiAgICBjdXN0b21JY29uOiBmdW5jdGlvbiBjdXN0b21JY29uKHByb3ApIHsKICAgICAgdmFyIHF1YW50aXR5ID0gcHJvcC5tYXNrX2FkdWx0ICsgcHJvcC5tYXNrX2NoaWxkOwogICAgICB2YXIgaWNvbiA9IHRoaXMuaWNvbkNvbG9yLmJsdWU7CgogICAgICBpZiAocXVhbnRpdHkgPiAxMDApIHsKICAgICAgICBpY29uID0gdGhpcy5pY29uQ29sb3IuZ3JlZW47CiAgICAgIH0gZWxzZSBpZiAocXVhbnRpdHkgPiA1MCkgewogICAgICAgIGljb24gPSB0aGlzLmljb25Db2xvci5nb2xkOwogICAgICB9IGVsc2UgaWYgKHF1YW50aXR5ID4gMCkgewogICAgICAgIGljb24gPSB0aGlzLmljb25Db2xvci5yZWQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWNvbiA9IHRoaXMuaWNvbkNvbG9yLmdyZXk7CiAgICAgIH0KCiAgICAgIHJldHVybiBpY29uOwogICAgfQogIH0KfTs="},{"version":3,"sources":["VueLeaflet.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"vue-leaflet w-9/12 h-screen\">\n    <l-map :zoom=\"zoom\" :center=\"center\">\n      <l-tile-layer :url=\"url\" :attribution=\"attribution\"></l-tile-layer>\n      <v-marker-cluster :options=\"clusterOptions\">\n        <l-marker v-for=\"item in pharmacies\"\n          :key=\"item.id\"\n          :icon=\"customIcon(item.properties)\"\n          :lat-lng=\"getGeometry(item.geometry)\"\n        >\n          <l-popup :content=\"getInfo(item.properties)\"></l-popup>\n        </l-marker>\n      </v-marker-cluster>\n    </l-map>\n  </div>\n</template>\n\n<script>\nimport {\n  LMap,\n  LTileLayer,\n  LMarker,\n  LPopup,\n} from 'vue2-leaflet';\nimport { latLng, Icon } from 'leaflet';\nimport Vue2LeafletMarkerCluster from 'vue2-leaflet-markercluster';\n\n\nexport default {\n  name: 'VueLeaflet',\n  components: {\n    LMap,\n    LTileLayer,\n    LMarker,\n    LPopup,\n    'v-marker-cluster': Vue2LeafletMarkerCluster,\n  },\n  data() {\n    return {\n      zoom: 14,\n      center: latLng(22.627333, 120.318065),\n      url: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n      attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>',\n      iconColor: {\n        grey: this.customIconColor('grey'),\n        blue: this.customIconColor('blue'),\n        gold: this.customIconColor('gold'),\n        green: this.customIconColor('green'),\n        red: this.customIconColor('red'),\n      },\n      clusterOptions: {\n        disableClusteringAtZoom: 16,\n      },\n    };\n  },\n  computed: {\n    // 更新口罩數量\n    pharmacies() {\n      return this.$store.state.pharmacies;\n    },\n  },\n  methods: {\n    // 座標經緯度\n    getGeometry(geo) {\n      return latLng(geo.coordinates[1], geo.coordinates[0]); // latLng(緯度，經度)\n    },\n    // 座標彈出視窗\n    getInfo(prop) {\n      // const phone = `(${prop.phone.substr(0, 2)})-${prop.phone.substr(4)}`;\n      const updated = prop.updated === '' ? '無' : prop.updated;\n      return `\n        <h1 class=\"text-xl font-medium mb-2\">${prop.name}</h1>\n        <div class=\"text-base text-grey mb-2\">\n          <i class=\"fas fa-map-marker-alt mr-1\"></i>\n          <span>${prop.address}</span>\n        </div>\n        <div class=\"text-base text-grey mb-2\">\n          <i class=\"fas fa-phone-volume mr-1\"></i>\n          <span>${prop.phone}</span>\n        </div>\n        <div class=\"text-base flex mb-2 justify-center\">\n          <div class=\"text-center text-white bg-primary py-3 rounded-l rounded-r-none border-r w-1/2\">\n            <span class=\"mr-1\">成人口罩:</span>\n            <span>${prop.mask_adult}</span>\n          </div>\n          <div class=\"text-center text-white bg-primary py-3 rounded-r rounded-l-none w-1/2\">\n            <span class=\"mr-1\">兒童口罩:</span>\n            <span>${prop.mask_child}</span>\n          </div>\n        </div>\n        <div class=\"text-sm text-grey\">更新時間: ${updated}</div>\n      `;\n    },\n    // 座標顏色\n    customIconColor(color) {\n      // leaflet-color-markers\n      const iconColor = new Icon({\n        iconUrl: `https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-${color}.png`,\n        shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\n        iconSize: [25, 41],\n        iconAnchor: [12, 41],\n        popupAnchor: [1, -34],\n        shadowSize: [41, 41],\n      });\n      return iconColor;\n    },\n    // 依口罩數量(成人+兒童)區分座標顏色\n    customIcon(prop) {\n      const quantity = prop.mask_adult + prop.mask_child;\n      let icon = this.iconColor.blue;\n      if (quantity > 100) {\n        icon = this.iconColor.green;\n      } else if (quantity > 50) {\n        icon = this.iconColor.gold;\n      } else if (quantity > 0) {\n        icon = this.iconColor.red;\n      } else {\n        icon = this.iconColor.grey;\n      }\n      return icon;\n    },\n  },\n};\n</script>\n\n<style scoped>\n  @import \"~leaflet.markercluster/dist/MarkerCluster.css\";\n  @import \"~leaflet.markercluster/dist/MarkerCluster.Default.css\";\n</style>\n"],"sourceRoot":"src/components"}]}